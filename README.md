# Flimo World

[![platform](https://img.shields.io/badge/platform-Web-blue)](https://github.com/socekin/flimo_world)
[![requirements](https://img.shields.io/badge/requirements-Node.js%2018%2B-green)](https://nodejs.org/)
[![license](https://img.shields.io/badge/license-CC%20BY--NC--SA%204.0-blue)](https://creativecommons.org/licenses/by-nc-sa/4.0/)
[![Contact](https://img.shields.io/badge/Contact-Telegram-2CA5E0?logo=telegram)](https://t.me/jayfxfx)

**AI-Powered Interactive Story Creator** - Create immersive narrative worlds with AI-generated characters, scenes, and interactive mystery gameplay.

ğŸ“¬ **Contact: [@jayfxfx](https://t.me/jayfxfx) on Telegram**

---

## âœ¨ Features

| Feature | Description |
|---------|-------------|
| ğŸ—£ï¸ **Natural Language Creation** | Describe your world in plain English and watch it come to life |
| ğŸ­ **AI-Generated NPCs** | Unique characters with personalities, goals, and hidden secrets |
| ğŸ¨ **AI Visuals** | Environment scenes and character portraits generated by AI |
| ğŸ—ºï¸ **Interactive World Map** | Visual world builder with draggable location markers |
| ğŸ” **Mystery Game Mode** | Play through stories as interactive detective games |
| ğŸ’¬ **Multi-turn Editing** | 5-turn context memory for coherent story refinement |

---

## ğŸ›  Tech Stack

| Category | Technology |
|----------|------------|
| Frontend | React 18 + Vite |
| Styling | Tailwind CSS + shadcn/ui |
| 3D Engine | Three.js + React Three Fiber |
| LLM | OpenRouter API (Gemini 2.5 Flash) |
| Image Generation | Google Gemini |
| Deployment | Cloudflare Pages |

---

## ğŸš€ Quick Start

### Prerequisites

- Node.js 18+
- [OpenRouter API Key](https://openrouter.ai/)
- [Google Gemini API Key](https://aistudio.google.com/)

### Installation

```bash
# Clone the repository
git clone https://github.com/socekin/flimo_world.git
cd flimo_world

# Install dependencies
npm install

# Copy environment example
cp .env.example .env.local
```

### Configuration

Edit `.env.local` with your API keys:

```bash
# LLM (Required)
VITE_OPENROUTER_API_KEY=your_openrouter_key
VITE_OPENROUTER_MODEL=google/gemini-3-flash-preview

# Image Generation (Required)
VITE_GEMINI_API_KEY=your_gemini_key
VITE_GEMINI_IMAGE_MODEL=gemini-2.0-flash-exp-image-generation
```

### Development

```bash
npm run dev
# Open http://localhost:5173
```

### Build

```bash
npm run build
```

---

## ğŸ“ Project Structure

```
flimo_world/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent/              # AI Agent System
â”‚   â”‚   â”œâ”€â”€ orchestrator/   # Workflow orchestrator
â”‚   â”‚   â”œâ”€â”€ router/         # Intent recognition & routing
â”‚   â”‚   â””â”€â”€ skills/         # Modular skill modules (19+ skills)
â”‚   â”œâ”€â”€ components/         # Shared React components
â”‚   â”œâ”€â”€ pages/              # Page components (Create, Play, Game)
â”‚   â”œâ”€â”€ game/               # 3D game mode components
â”‚   â”œâ”€â”€ lib/                # API clients & utilities
â”‚   â””â”€â”€ i18n/               # Internationalization
â”œâ”€â”€ public/                 # Static assets (images, videos, fonts)
â””â”€â”€ *.json                  # Sample story & NPC data
```

---

## ğŸ® How It Works

### Create Mode - AI-Powered Story Generation

```mermaid
flowchart LR
    subgraph Input
        A[User Prompt]
    end
    
    subgraph LLM["ğŸ¤– LLM Processing"]
        B[Story World Generator]
        C[NPC Designer]
        D[Mystery Generator]
    end
    
    subgraph ImageAI["ğŸ¨ Image AI"]
        E[Environment Image]
        F[NPC Portrait]
        G[World Map Image]
    end
    
    subgraph Output
        H[Complete Story]
    end
    
    A --> B
    B --> C
    C --> D
    B --> E
    C --> F
    D --> G
    E --> H
    F --> H
    G --> H
```

**Create Mode LLM Skills (18 Skills):**

| Skill | LLM Call | Description |
|-------|----------|-------------|
| `story-world` | âœ… | Generate world setting, background, truth |
| `story-npc` | âœ… | Create NPCs with personalities & secrets |
| `mystery-world` | âœ… | Generate mystery plot & clues |
| `mystery-npc` | âœ… | Create NPC dual versions (creator/player) |
| `environment-image` | âœ… | Generate scene images via Gemini |
| `npc-image` | âœ… | Generate character portraits |
| `worldmap-layout` | âœ… | Plan location layout on map |
| `worldmap-image` | âœ… | Generate final world map image |

---

### Play Mode - AI-Driven NPC Behavior

```mermaid
flowchart TD
    subgraph Init["Game Start"]
        A[Create Session] --> B[Initialize NPCs]
    end
    
    subgraph Loop["ğŸ”„ Behavior Loop"]
        C{NPC Idle?}
        D["ğŸ¤– Think API"]
        E[Get New Action]
        F[Navigate to Location]
        G[Perform Action]
    end
    
    subgraph Chat["ğŸ’¬ Player Interaction"]
        H[Open Chat]
        I["ğŸ¤– Chat API"]
        J[NPC Response]
        K[Update Memory]
    end
    
    B --> C
    C -->|Yes| D
    D --> E
    E --> F
    F --> G
    G --> C
    
    C -->|Player talks| H
    H --> I
    I --> J
    J --> K
    K --> C
```

**Play Mode LLM APIs:**

| API | LLM Call | Description |
|-----|----------|-------------|
| `POST /sessions` | âœ… | Initialize NPC states with AI |
| `POST /npcs/{id}/think` | âœ… | NPC decides next action |
| `POST /chat` | âœ… | NPC responds to player |
| `POST /interact` | âœ… | NPC-to-NPC dialogue |
| `POST /chat/open` | âœ… | NPC greeting when player opens chat |
| `POST /chat/close` | âœ… | Summarize conversation to memory |

---

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## ğŸ“ License

This project is licensed under [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/).

- âœ… **Attribution** - You must give appropriate credit
- âœ… **ShareAlike** - Derivatives must use the same license
- âŒ **NonCommercial** - Commercial use is not permitted

---

## ğŸ™ Acknowledgements

- [OpenRouter](https://openrouter.ai/) - LLM API Gateway
- [Google Gemini](https://deepmind.google/technologies/gemini/) - AI Image Generation
- [Three.js](https://threejs.org/) - 3D Graphics
- [Vite](https://vitejs.dev/) - Build Tool
- [Tailwind CSS](https://tailwindcss.com/) - Styling

---

Made with â¤ï¸ by Jay
